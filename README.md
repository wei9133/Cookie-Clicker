# 🍪 Cookie Clicker Ultimate Automation (v9.1.0+)

**全方位《Cookie Clicker》自動化託管系統**

> **Current Version:** v9.1.0.1 (UI Sync Fix & Stock Broker Hotfix)

這不僅僅是一個連點器，而是一套針對遊戲後期設計的**旗艦級託管系統**。本腳本旨在接管遊戲中繁瑣的微操作與複雜策略管理，涵蓋花園變異排程、股市動態操盤、Godzamok 戰術連擊以及自動化季節輪替。

v9.x 系列更新重點在於**股市邏輯重構**與**花園保護協議**。引入了動態門檻演算法來最佳化股票買賣，修復了經紀人購買 API，並針對多汁女王甜菜 (JQB) 實裝了專屬保護機制。

---

## 🚀 v9.1.0+ 新版亮點 (What's New)

### 📈 股市 2.0：動態門檻與自動經紀人
*   **自動僱用經紀人 (Auto-Hire Broker)：** 修復了舊版 API 錯誤，現在透過 DOM 模擬點擊自動購買經紀人，有效降低交易手續費。
*   **動態門檻演算法 (Dynamic Thresholds)：** 不再使用固定數值。系統會依據您當前的經紀人數量與手續費率 (Overhead)，動態計算最佳買入與賣出係數，最大化獲利空間。
*   **憲法級防護：** 在「季節打寶 (Farming)」模式下，強制鎖定股市操作，防止資金意外流失。

### 🌻 花園 3.0：JQB 保護與突變管理
*   **JQB 保護協議 (Juicy Queenbeet Protocol)：** 針對最珍貴的「多汁女王甜菜」實裝特殊邏輯——僅在完全成熟時收割以獲取糖塊，其餘時間給予絕對豁免權，防止誤鏟。
*   **突變管理獨立開關 (Mutation Toggle)：** 側邊欄與主面板新增獨立的「突變管理」按鈕。您可以在保留自動補種功能的同時，單獨關閉突變挖除功能（適合想保留雜草或特定植物時）。
*   **介面同步修復：** 修復了懸浮面板與主設定介面按鈕狀態不同步的問題。

---

## 🛠️ 核心功能模組 (Core Modules)

### 🌿 花園管理系統 (Garden Manager)
*   **藍圖編輯器 (Blueprint Editor)：**
    *   **讀取實況：** 一鍵讀取當前遊戲盤面至編輯器。
    *   **視覺化標記：** 自動標記未解鎖植物 (紫色)，支援多組存檔管理。
*   **自動化耕種：**
    *   **突變模式：** 自動收割成熟植物，並針對新品種 (紫框) 給予額外緩衝時間確保種子掉落。
    *   **聰明補種：** 避開 CpS Buff 期間消耗大量餅乾，選擇在產量低谷時補種。
    *   **同步播種 (Sync Planting)：** 確保資金充足且無 Buff 時才一次性播種，最大化成本效益。

### ⚔️ 進階策略 (Advanced Strategy)
*   **Godzamok 戰術核彈 (Tactical Nuke)：**
    *   **一鍵連擊：** 按下快捷鍵 (預設 `^+F9`) 自動賣出建築觸發 Buff，並在秒數後自動買回。
    *   **戒嚴協議 (Martial Law)：** 觸發戰術時自動暫停花園突變與研發，確保資金專注於買回建築。
    *   **建築上限修正：** 買回時嚴格遵守設定的建築上限，防止溢出。
*   **魔法賭徒 (Gambler)：**
    *   自動偵測 Buff 狀態，利用魔法塔「命運之手」進行連擊賭注。
    *   具備紅綠燈視覺提示 (綠燈=成功延長 Buff，紅燈=失敗)。

### ⚙️ 基礎自動化 (Essentials)
*   **智能點擊：** 自動點擊大餅乾、黃金餅乾、馴鹿。
*   **皺紋蟲管理：**
    *   **閃光蟲保護：** 自動識別並絕對保護閃光皺紋蟲 (Shiny Wrinkler)。
    *   **策略戳破：** 依據季節狀態決定養肥或即時戳破。
*   **季節管理：** 自動購買季節升級，完成目標後自動切換至下一季節。
*   **幸運跑馬燈：** 自動偵測並點擊綠色的 Fortune News。
*   **糖塊收割：** 支援成熟度判斷、雙倍/稀有糖塊識別，並防止誤點肉色糖塊。

---

## 📥 安裝與使用 (Installation)

1.  安裝瀏覽器擴充功能：[Tampermonkey](https://www.tampermonkey.net/) 或 [Violentmonkey](https://violentmonkey.github.io/)。
2.  點擊安裝本腳本，或將代碼複製到新腳本中。
3.  進入遊戲 [Cookie Clicker](https://orteil.dashnet.org/cookieclicker/)。
4.  腳本加載後，畫面左側將顯示浮動控制面板。

---

## ⌨️ 快捷鍵與控制 (Controls)

| 快捷鍵 | 功能 | 說明 |
| :--- | :--- | :--- |
| **F8** | **全局總開關** | 暫停/恢復所有自動化腳本運作 (緊急用) |
| **Ctrl+Shift+F9** | **戰術核彈** | 賣出指定建築觸發 Godzamok Buff (可自訂) |
| **F10** | **快速補貨** | 手動觸發建築買回機制 (可自訂) |
| **Alt + 拖曳** | **移動面板** | 幾乎所有懸浮面板都支援拖曳位置 |

---

## 📋 配置與備份 (Configuration)

v9.x 版本延續了設定備份功能，方便您跨裝置轉移：

1.  打開控制面板，切換至 **[設定]** 分頁。
2.  點擊 **[📤 匯出設定]**，系統將生成一串 Base64 代碼。
3.  在新裝置上點擊 **[📥 匯入設定]** 並貼上代碼即可還原所有開關與數值。

### 資金鎖定模式 (Spending Lock)
在控制面板或懸浮小工具中點擊 **🔒 (鎖頭圖示)**：
*   **啟用時：** 禁止購買建築、升級、花園補種與股市買入（自動購買誓約除外）。
*   **適用場景：** 當您需要存錢購買昂貴升級 (如小貓) 或準備進行大型連擊時。

---

## 🛑 常見問題 (FAQ)

**Q: 為什麼股市不買入股票？**
A: 請檢查：1. 是否開啟了「存錢模式」或「資金鎖定」？ 2. 手續費是否過高？(v9.0+ 會動態計算門檻，若經紀人太少，系統會傾向觀望)。

**Q: 為什麼花園不自動收割？**
A: 請確認「花園維護」與「突變管理」皆已開啟。若植物是 JQB (多汁女王甜菜)，系統會等到它完全成熟才收割以獲取糖塊。

**Q: 腳本顯示「系統已暫停」？**
A: 您可能按到了 `F8`。請再次按下 `F8` 或點擊面板上方的狀態列來恢復運行。

---

## 📜 變更日誌摘要 (Changelog Highlights)

*   **v9.1.0.1:** [Hotfix] 修復介面按鈕狀態同步問題。
*   **v9.1.0:** [Feature] 新增 JQB 保護協議；新增突變管理獨立開關；修復花園迴圈邏輯。
*   **v9.0.1:** [Fix] 修復股市經紀人購買崩潰問題 (改用 DOM 模擬)；實裝動態門檻演算法。
*   **v9.0.0:** [Major] 股市自動化重構；導入憲法級 (Constitution Level) 防護邏輯。

---

**Disclaimer:** This script is for educational purposes. Use at your own risk. Cheated cookies taste awful, but automated cookies taste like efficiency. 🍪
